{% extends "layout.html" %}

{% block title %}{{ username }}{% endblock %}

{% block content %}
<div class="header">
    <h2>{{ username }}</h2>
    <p><a href="/user/{{ user_id }}">{{ username }}</a> on jakanut {{ activity.recipe_count }} resepti√§</p>
    <p><a href="/user/{{ user_id }}">{{ username }}</a> on antanut {{ activity.review_count }} arvostelua</p>
</div>
{% for r in user_recipes %}
<div class="item">
  <h3><a href="/recipe/{{ r.id }}">{{ r.title }}</a></h3>
  <p>
    {% for tag in r.tags %}
    <a href="{{ url_for('search', query=tag) }}">#{{ tag }}</a>&nbsp;
    {% endfor %}
  </p>
  {% if r.avg_rating %}
  <p>{{ r.avg_rating }} / 5 &nbsp;&nbsp;&nbsp; {{ r.rating_count }} arvostelua</p>
  {% else %}
  <p>Ei arvosteluja</p>
  {% endif %}
  <p>
    <a href="/user/{{ r.user_id }}">{{ r.username }}</a> &nbsp; {{ r.created_at | format_date }}
  </p>
</div>
{% endfor %}
</div>

{% if page_count > 1 %}
<div class="header">
  {% if page > 1 %}
  <a href="{{ url_for('show_user', user_id=user_id, page=page - 1) }}"><button>Edellinen</button></a>
  {% endif %}
  Sivu {{ page }} / {{ page_count }}
  {% if page < page_count %}
  <a href="{{ url_for('show_user', user_id=user_id, page=page + 1) }}"><button>Seuraava</button></a>
  {% endif %}
</div>
{% endif %}
{% endblock %}